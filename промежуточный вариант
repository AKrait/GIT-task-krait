// ==UserScript==
// @name         GoogleBot
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       Aleksandra Krait
// @match        https://ru.search.yahoo.com*

// @icon
// @grant        none
// ==/UserScript==

let links = document.links; // полный список ссылок на странице
let searchInput = document.getElementsByName("p")[0];
let btnK = document.querySelectorAll('[type="submit"]')[0]; //вызов кнопки по идентификатору массива
let keywords = ['Персональная постановка целей',
                '10 шагов для достижения целей',
                'Планирование недели',
                'Как планирование изменит вашу жизнь',
                'Искусство расставлять приоритеты',
                'Тайм-менеджмент: управление временем']// ключевые слова для поиска
let keyword = keywords[getRandom(0, keywords.length)]; // достаем из массива рандомную фразу
let reset = document.querySelector('sprite')

if (btnK !== undefined) { // если кнопка поиска на странице определена
  let i = 0;
  let timerId = setInterval(()=>{
    searchInput.value += keyword[i]; //то в строку поиска вносится рандомная фраза из массива
    i++; // по одному символу
    if (i == keyword.length) { // если ш достигла длинны выбранной фразы
      clearInterval(timerId); // станавливаем цикл
      setTimeout(()=>{ // позволяет вызвать фунцию 1 раз через какой то промежуток времени (()=>{}) стрелочная функия
        btnK.click(); //клик
      }, getRandom(200, 500)); //интервал вот 200 до 500 милисекунд
    }
  }, 100);
} if (reset !== undefined){
  for (let i=0; i<links.length; i++) { // запускается цикл поиска
    if (links[i].class.in(' d-ib ls-05 fz-20 lh-26 td-hu tc va-bot mxw-100p')) { // из полного списка ссылкок страницы находим указанную
      console.log("нашел строку" + links[i]); // выводим в консоль найденную ссылку
      let link = links[i]; // присваиваем ссылке переменную
      setTimeout(()=>{ // позволяет вызвать фунцию 1 раз через какой то промежуток времени (()=>{}) стрелочная функия
        link.click(); // кликаем на эту переменную
      }, getRandom(3500, 4500)); //интервал вот 200 до 500 милисекун
      break; // завершаем цикл
    }
  }
}
function getRandom(min,max) { // случайным образом выдает
  return Math.floor(Math.random()*(max - min) + min);// округляем в меньшую сторону(рандомное значение
}
